<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9394285765069873"
     crossorigin="anonymous"></script>
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys getNextSurveyStep onSessionId setPersonProperties".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_vYRCWO99s1v9OuU1y6xF23wjQxnFT9wJ4paSJ9mGQf2',{api_host:'https://us.i.posthog.com', person_profiles: 'identified_only' // or 'always' to create profiles for anonymous users as well
            })
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="PunchPredictor website info make and track your fight predictions here!" />
    <meta name="author" content="Bob" />
    <title>PunchPredictor Main Page</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/boxing_gloves-removebg-preview.png" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="styles.css" rel="stylesheet" />
    <!-- Google Analytics Tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4F873DFQPQ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-4F873DFQPQ');
    </script>
</head>
<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand text-bigger-specifically" href="#page-top">Website Info</a>
            <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <div class="bars">
                    <!-- Bars Icon SVG -->
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" href="http://punchpredictor.com/leaderBoard.html">LeaderBoard</a></li>

                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" href="http://punchpredictor.com/upcomingEvents">Upcoming Events</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" id="navRegister" href="http://punchpredictor.com/register.html">Register</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" id="navSignIn" href="http://punchpredictor.com/login.html">Sign in</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" id="navSignIn" href="http://punchpredictor.com/previousEvents.html">Previous Events</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" id="navSignOut" href="javascript:void(0);">Sign Out</a></li>
                    <li class="nav-item mx-0 mx-lg-1">
                        <a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" id="navMessages" href="http://punchpredictor.com/chat.html">
                            Messages
                            <span class="badge bg-danger rounded-pill ms-1"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

<!-- Hero Section -->
<header class="masthead bg-primary text-white text-center" style="padding-top: 150px; padding-bottom: 50px;">
    <div class="container d-flex align-items-center flex-column">
        <!-- Masthead Avatar Image -->
        <img class="masthead-avatar mb-3" src="assets/boxing_gloves-removebg-preview.png" alt="Boxing Gloves" style="width: 150px; height: auto;">
        
        <!-- Masthead Heading -->
        <h1 class="masthead-heading text-uppercase mb-0">Welcome to PunchPredictor!</h1>
        
        <!-- Icon Divider -->
        <div class="divider-custom divider-light">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <!-- Star Icon SVG -->
            </div>
            <div class="divider-custom-line"></div>
        </div>
        
        <!-- Masthead Subheading -->
        <p class="masthead-subheading font-weight-light mb-0">Make and Track Your UFC Fight Predictions. Completely for free!</p>
        
        <!-- Registration Button -->
        <a href="https://punchpredictor.com/register" class="burningButton">Click to make an account</a>

    </div>
</header>

<!-- Features Section -->
<section class="page-section portfolio" id="features">
    <div class="container">
        <!-- Features Section Heading -->
        <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">What Can You Do On This Website?</h2>
        <!-- Icon Divider -->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <!-- Star Icon SVG -->
            </div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Features Grid Items -->
        <div class="row justify-content-center">
            <!-- Feature Item 1 -->
            <div class="col-12 col-md-4 mb-5">
                <a  class="text-decoration-none">
                    <div class="portfolio-item mx-auto">
                        <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                            <div class="portfolio-item-caption-content text-center text-white">
                                <i class="fas fa-plus fa-3x"></i>
                            </div>
                        </div>
                        <img class="img-fluid" src="assets/UEgif.gif" alt="Upcoming Events">
                        <p class="text-center bold-text">Make predictions on upcoming UFC events.</p>
                    </div>
                </a>
            </div>
            <!-- Feature Item 2 -->
            <div class="col-12 col-md-4 mb-5">
                <a  class="text-decoration-none">
                    <div class="portfolio-item mx-auto">
                        <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                            <div class="portfolio-item-caption-content text-center text-white">
                                <i class="fas fa-plus fa-3x"></i>
                            </div>
                        </div>
                        <img class="img-fluid" src="assets/track_predictions (1).png" alt="Track Predictions">
                        <p class="text-center bold-text">Track your predictions and see your performance over time.</p>
                    </div>
                </a>
            </div>
            <!-- Feature Item 3 -->
            <div class="col-12 col-md-4 mb-5">
                <a  class="text-decoration-none">
                    <div class="portfolio-item mx-auto">
                        <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                            <div class="portfolio-item-caption-content text-center text-white">
                                <i class="fas fa-plus fa-3x"></i>
                            </div>
                        </div>
                        <img class="img-fluid" src="assets/leaderboard (3).png" alt="Leaderboard">
                        <p class="text-center bold-text">Compete with others and climb the leaderboard.</p>
                    </div>
                </a>
            </div>
        </div>
    </div>

<!-- Creator Section -->
<section class="page-section bg-light" id="creator">
    <div class="container">
        <!-- Creator Section Heading -->
        <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Meet the Creators</h2>
        <!-- Icon Divider -->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <!-- Heart Icon SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path d="M462.3 62.7C430.4 30.8 385.7 15 340.1 23.3c-49.3 9.1-90.2 50.1-99.4 99.4c-9.1-49.3-50.1-90.2-99.4-99.4C126.3 15 81.6 30.8 49.7 62.7c-64 64-64 167.9 0 231.9l181.3 181.3c6 6 14.1 9 22.6 9s16.6-3 22.6-9L462.3 294.6c64-64 64-167.9 0-231.9zM408.4 320L256 472.4L103.6 320c-43.2-43.2-52.5-108.2-26.8-158.6c14.7-29 40.6-54.9 69.5-69.5c50.5-25.7 115.5-16.4 158.6 26.8l22.1 22.1c6.3 6.3 16.4 6.3 22.6 0l22.1-22.1c43.2-43.2 108.2-52.5 158.6-26.8c29 14.6 54.9 40.6 69.5 69.5c25.7 50.5 16.4 115.5-26.8 158.6z"/>
                </svg>
            </div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Creator Bio -->
        <div class="row justify-content-center">
            <div class="col-lg-8">

                <!-- Creator Description -->
                <p class="text-center">
                    Hello, we're Parker and Marcos, the creators of PunchPredictor. As college students and passionate MMA fans—both as spectators and practitioners—we envisioned a place where enthusiasts like you could predict fight outcomes and track performance over time, all without spending any money. This website is our passion project, built in between classes and training sessions. We’re dedicated to bringing you the best in fight prediction and community engagement. Thank you for joining us on this exciting journey!
                </p>
            </div>
        </div>
    </div>
</section>
    <!-- Footer-->
    <footer class="footer text-center">
        <div class="container">
            <div class="row">
                <!-- Footer Contact Information -->
                <div class="col-lg-4 mb-5 mb-lg-0">
                    <h4 class="text-uppercase mb-4">Contact Information</h4>
                    <p class="lead mb-0">
                        Contact me at <a href="mailto:lordbobsemail@gmail.com">lordbobsemail@gmail.com</a>
                    </p>
                </div>
                <!-- Footer About Text -->
                <div class="col-lg-4">
                    <h4 class="text-uppercase mb-4">About PunchPredictor</h4>
                    <p class="lead mb-0">Your go-to platform for all things UFC predictions.</p>
                </div>
                <!-- Footer Copyright -->
                <div class="col-lg-4">
                    <h4 class="text-uppercase mb-4">Make a free account</h4>
                    <p class="lead mb-0">
                        Make an account by clicking <a href="https://punchpredictor.com/register.html">register</a> at the top.
                    </p>
                </div>
            </div>
        </div>
        
    </footer>
    <script type="module">

let username; // Declare a global variable
document.addEventListener('DOMContentLoaded', function() {
    async function compareTimestamps() {
    try {
        // Initialize chatLogTimestamp to null
        let chatLogTimestamp = null;

        // Fetch the chat log timestamp
        const chatLogResponse = await fetch(`https://g8mjh5drkf.execute-api.us-east-1.amazonaws.com/dev?page=chatLogRead&username=${username}`);
        const chatLogData = await chatLogResponse.json();

        if (chatLogData.statusCode === 200) {
            // Extract the chatLog timestamp if it exists
            chatLogTimestamp = JSON.parse(chatLogData.body).chatLog;
        } else if (chatLogData.statusCode === 404) {
            // Chat log not found, treat all messages as new
            chatLogTimestamp = null;
        } else {
            console.error('Unexpected response:', chatLogData);
            return;
        }

        // Fetch the chat messages
        const chatResponse = await fetch(`https://g8mjh5drkf.execute-api.us-east-1.amazonaws.com/dev?page=chat&username=${username}`);
        const chatData = await chatResponse.json();
        const chatMessages = JSON.parse(chatData.body);

        // Initialize a counter for new messages
        let newMessageCount = 0;

        // Compare timestamps
        for (let conversation in chatMessages) {
            const messages = chatMessages[conversation];
            for (let messageKey in messages) {
                const message = messages[messageKey];
                if (message.sender !== username) {
                    if (chatLogTimestamp === null || new Date(message.timestamp) > new Date(chatLogTimestamp)) {
                        newMessageCount++;
                    }
                }
            }
        }

        // Update the badge in the DOM if newMessageCount is greater than 0
        const badgeElement = document.querySelector('#navMessages .badge');
        if (badgeElement && newMessageCount > 0) {
            badgeElement.textContent = newMessageCount;
        }
    } catch (error) {
        console.error('Error:', error);
    }
}
    const registerKey = localStorage.getItem('registerKey');
    if (registerKey) {
        fetch(`https://g8mjh5drkf.execute-api.us-east-1.amazonaws.com/dev?page=verify&result=${registerKey}`)
            .then(response => response.json())
            .then(data => {
                const responseBody = JSON.parse(data.body);
                if (data.statusCode === 200) {
                    username = responseBody.username; // Assign value to the local variable
                    console.log('Username:', username);

                    // Proceed with the remaining DOM manipulations
                    updateNavbar(username);
                    setupSignOutButton();
                    compareTimestamps();
                } else {
                    console.error('Failed to verify register key:', responseBody.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    } else {
        console.error('No registerKey found in localStorage');
        setupSignOutButton();
    }
});

function updateNavbar(username) {
    if (username) {
        console.log('Username:', username);
        // Hide the REGISTER and SIGN IN navigation items
        document.getElementById('navRegister').style.display = 'none';
        document.getElementById('navSignIn').style.display = 'none';

        // Create a new nav item for the user, using the username as the link text
        var navItem = document.createElement('li');
        navItem.className = 'nav-item mx-0 mx-lg-1';
        navItem.innerHTML = `<a class="nav-link py-3 px-0 px-lg-3 rounded text-bigger-specifically2" href="http://punchpredictor.com/user.html">${username}</a>`;
        document.querySelector('#navbarResponsive .navbar-nav').appendChild(navItem);
    }
}

function setupSignOutButton() {
    var signOutButton = document.getElementById('navSignOut');

    // Check if username exists in the global variable
    if (username) {
        // Show sign out button if username exists
        signOutButton.style.display = 'block';
    } else {
        // Hide sign out button if no username exists
        signOutButton.style.display = 'none';
    }

    // Add event listener for sign out action
    signOutButton.addEventListener('click', function() {
        localStorage.removeItem('registerKey'); // This will delete the registerKey from localStorage

        // Optional: Provide feedback or redirect the user
        alert('You have been signed out.');
        window.location.href = 'http://punchpredictor.com/login.html'; // Redirects to the login page
    });
}


</script>
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
